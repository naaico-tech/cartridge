# Cartridge-Warp Environment Variables
# Copy this file to .env and update the values as needed
# All environment variables use the CARTRIDGE_WARP_ prefix

# Execution Mode
CARTRIDGE_WARP_MODE=single
CARTRIDGE_WARP_SINGLE_SCHEMA_NAME=ecommerce

# Global Parallelism Configuration
CARTRIDGE_WARP_GLOBAL_MAX_PARALLEL_STREAMS=2

# Global Table Filtering (comma-separated lists)
# Whitelist takes precedence over blacklist if both are specified
# CARTRIDGE_WARP_GLOBAL_TABLE_WHITELIST=users,orders,products
CARTRIDGE_WARP_GLOBAL_TABLE_BLACKLIST=temp_tables,debug_logs,cache_data

# Source Database Configuration
CARTRIDGE_WARP_SOURCE__TYPE=mongodb
CARTRIDGE_WARP_SOURCE__CONNECTION_STRING=mongodb://localhost:27017
CARTRIDGE_WARP_SOURCE__DATABASE=ecommerce_db
CARTRIDGE_WARP_SOURCE__CHANGE_DETECTION_COLUMN=updated_at
CARTRIDGE_WARP_SOURCE__CHANGE_DETECTION_STRATEGY=timestamp
CARTRIDGE_WARP_SOURCE__TIMEZONE=UTC

# Destination Database Configuration
CARTRIDGE_WARP_DESTINATION__TYPE=postgresql
CARTRIDGE_WARP_DESTINATION__CONNECTION_STRING=postgresql://user:password@localhost:5432/warehouse
CARTRIDGE_WARP_DESTINATION__DATABASE=warehouse
CARTRIDGE_WARP_DESTINATION__METADATA_SCHEMA=cartridge_warp_metadata

# Schema Configuration (for single schema mode)
# Note: Complex nested configurations like schemas array are better defined in YAML/JSON files
# Environment variables work best for simple scalar values and connection strings

# Monitoring Configuration
CARTRIDGE_WARP_MONITORING__PROMETHEUS__ENABLED=true
CARTRIDGE_WARP_MONITORING__PROMETHEUS__PORT=8080
CARTRIDGE_WARP_MONITORING__PROMETHEUS__PATH=/metrics
CARTRIDGE_WARP_MONITORING__LOG_LEVEL=INFO
CARTRIDGE_WARP_MONITORING__STRUCTURED_LOGGING=true

# Error Handling Configuration
CARTRIDGE_WARP_ERROR_HANDLING__MAX_RETRIES=3
CARTRIDGE_WARP_ERROR_HANDLING__BACKOFF_FACTOR=2.0
CARTRIDGE_WARP_ERROR_HANDLING__MAX_BACKOFF_SECONDS=300
CARTRIDGE_WARP_ERROR_HANDLING__DEAD_LETTER_QUEUE=true
CARTRIDGE_WARP_ERROR_HANDLING__IGNORE_TYPE_CONVERSION_ERRORS=true
CARTRIDGE_WARP_ERROR_HANDLING__LOG_CONVERSION_WARNINGS=true

# Runtime Settings
CARTRIDGE_WARP_DRY_RUN=false
CARTRIDGE_WARP_FULL_RESYNC=false

# Production Security Settings (change these in production)
# CARTRIDGE_WARP_SOURCE__CONNECTION_STRING=mongodb+srv://user:password@cluster.mongodb.net/production_db
# CARTRIDGE_WARP_DESTINATION__CONNECTION_STRING=postgresql://user:password@production-db:5432/warehouse

# Development Settings
# CARTRIDGE_WARP_MONITORING__LOG_LEVEL=DEBUG
# CARTRIDGE_WARP_DRY_RUN=true

# Example: Override specific table parallelism (requires schema configuration in YAML)
# These would be used if you have a corresponding table configuration in your YAML file
# CARTRIDGE_WARP_SCHEMAS__0__TABLES__0__MAX_PARALLEL_STREAMS=4  # First table in first schema
# CARTRIDGE_WARP_SCHEMAS__0__TABLES__1__MAX_PARALLEL_STREAMS=1  # Second table in first schema
